{"ast":null,"code":"// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction validateLength(value, maxLength) {\n  return !value || value.length <= maxLength;\n}\n/**\n * Console Platform's client logging JS API client.\n */\nexport class CLogClient {\n  /**\n   * Sends metric but only if Console Platform client logging JS API is present in the page.\n   */\n  sendMetric(metricName, value, detail) {\n    if (!metricName || !/^[a-zA-Z0-9_-]+$/.test(metricName)) {\n      console.error(`Invalid metric name: ${metricName}`);\n      return;\n    }\n    if (!validateLength(metricName, 1000)) {\n      console.error(`Metric name ${metricName} is too long`);\n      return;\n    }\n    if (!validateLength(detail, 4000)) {\n      console.error(`Detail for metric ${metricName} is too long: ${detail}`);\n      return;\n    }\n    const AWSC = this.findAWSC(window);\n    if (typeof AWSC === 'object' && typeof AWSC.Clog === 'object' && typeof AWSC.Clog.log === 'function') {\n      AWSC.Clog.log(metricName, value, detail);\n    }\n  }\n  findAWSC(currentWindow) {\n    try {\n      if (typeof (currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.AWSC) === 'object') {\n        return currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.AWSC;\n      }\n      if (!currentWindow || currentWindow.parent === currentWindow) {\n        // When the window has no more parents, it references itself\n        return undefined;\n      }\n      return this.findAWSC(currentWindow.parent);\n    } catch (ex) {\n      // Most likely a cross-origin access error\n      return undefined;\n    }\n  }\n}\n/**\n * Console Platform's client v2 logging JS API client.\n */\nexport class PanoramaClient {\n  /**\n   * Sends metric but only if Console Platform client v2 logging JS API is present in the page.\n   */\n  sendMetric(metric) {\n    if (typeof metric.eventDetail === 'object') {\n      metric.eventDetail = JSON.stringify(metric.eventDetail);\n    }\n    if (typeof metric.eventValue === 'object') {\n      metric.eventValue = JSON.stringify(metric.eventValue);\n    }\n    if (!validateLength(metric.eventDetail, 4000)) {\n      console.error(`Event detail for metric is too long: ${metric.eventDetail}`);\n      return;\n    }\n    if (!validateLength(metric.eventValue, 4000)) {\n      console.error(`Event value for metric is too long: ${metric.eventValue}`);\n      return;\n    }\n    if (!validateLength(metric.eventContext, 4000)) {\n      console.error(`Event context for metric is too long: ${metric.eventContext}`);\n      return;\n    }\n    if (!validateLength(metric.eventType, 50)) {\n      console.error(`Event type for metric is too long: ${metric.eventType}`);\n      return;\n    }\n    const panorama = this.findPanorama(window);\n    if (typeof panorama === 'function') {\n      panorama('trackCustomEvent', Object.assign({\n        timestamp: Date.now()\n      }, metric));\n    }\n  }\n  findPanorama(currentWindow) {\n    try {\n      if (typeof (currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.panorama) === 'function') {\n        return currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.panorama;\n      }\n      if (!currentWindow || currentWindow.parent === currentWindow) {\n        // When the window has no more parents, it references itself\n        return undefined;\n      }\n      return this.findPanorama(currentWindow.parent);\n    } catch (ex) {\n      // Most likely a cross-origin access error\n      return undefined;\n    }\n  }\n}","map":{"version":3,"names":["validateLength","value","maxLength","length","CLogClient","sendMetric","metricName","detail","test","console","error","AWSC","findAWSC","window","Clog","log","currentWindow","parent","undefined","ex","PanoramaClient","metric","eventDetail","JSON","stringify","eventValue","eventContext","eventType","panorama","findPanorama","Object","assign","timestamp","Date","now"],"sources":["/Users/dootano/Desktop/thetekshow-demo-app/node_modules/@cloudscape-design/component-toolkit/internal/base-component/metrics/log-clients.js"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nfunction validateLength(value, maxLength) {\n    return !value || value.length <= maxLength;\n}\n/**\n * Console Platform's client logging JS API client.\n */\nexport class CLogClient {\n    /**\n     * Sends metric but only if Console Platform client logging JS API is present in the page.\n     */\n    sendMetric(metricName, value, detail) {\n        if (!metricName || !/^[a-zA-Z0-9_-]+$/.test(metricName)) {\n            console.error(`Invalid metric name: ${metricName}`);\n            return;\n        }\n        if (!validateLength(metricName, 1000)) {\n            console.error(`Metric name ${metricName} is too long`);\n            return;\n        }\n        if (!validateLength(detail, 4000)) {\n            console.error(`Detail for metric ${metricName} is too long: ${detail}`);\n            return;\n        }\n        const AWSC = this.findAWSC(window);\n        if (typeof AWSC === 'object' && typeof AWSC.Clog === 'object' && typeof AWSC.Clog.log === 'function') {\n            AWSC.Clog.log(metricName, value, detail);\n        }\n    }\n    findAWSC(currentWindow) {\n        try {\n            if (typeof (currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.AWSC) === 'object') {\n                return currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.AWSC;\n            }\n            if (!currentWindow || currentWindow.parent === currentWindow) {\n                // When the window has no more parents, it references itself\n                return undefined;\n            }\n            return this.findAWSC(currentWindow.parent);\n        }\n        catch (ex) {\n            // Most likely a cross-origin access error\n            return undefined;\n        }\n    }\n}\n/**\n * Console Platform's client v2 logging JS API client.\n */\nexport class PanoramaClient {\n    /**\n     * Sends metric but only if Console Platform client v2 logging JS API is present in the page.\n     */\n    sendMetric(metric) {\n        if (typeof metric.eventDetail === 'object') {\n            metric.eventDetail = JSON.stringify(metric.eventDetail);\n        }\n        if (typeof metric.eventValue === 'object') {\n            metric.eventValue = JSON.stringify(metric.eventValue);\n        }\n        if (!validateLength(metric.eventDetail, 4000)) {\n            console.error(`Event detail for metric is too long: ${metric.eventDetail}`);\n            return;\n        }\n        if (!validateLength(metric.eventValue, 4000)) {\n            console.error(`Event value for metric is too long: ${metric.eventValue}`);\n            return;\n        }\n        if (!validateLength(metric.eventContext, 4000)) {\n            console.error(`Event context for metric is too long: ${metric.eventContext}`);\n            return;\n        }\n        if (!validateLength(metric.eventType, 50)) {\n            console.error(`Event type for metric is too long: ${metric.eventType}`);\n            return;\n        }\n        const panorama = this.findPanorama(window);\n        if (typeof panorama === 'function') {\n            panorama('trackCustomEvent', Object.assign({ timestamp: Date.now() }, metric));\n        }\n    }\n    findPanorama(currentWindow) {\n        try {\n            if (typeof (currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.panorama) === 'function') {\n                return currentWindow === null || currentWindow === void 0 ? void 0 : currentWindow.panorama;\n            }\n            if (!currentWindow || currentWindow.parent === currentWindow) {\n                // When the window has no more parents, it references itself\n                return undefined;\n            }\n            return this.findPanorama(currentWindow.parent);\n        }\n        catch (ex) {\n            // Most likely a cross-origin access error\n            return undefined;\n        }\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}