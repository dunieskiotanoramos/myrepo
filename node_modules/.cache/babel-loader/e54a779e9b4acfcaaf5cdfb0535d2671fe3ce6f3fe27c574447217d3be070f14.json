{"ast":null,"code":"import { compareDates, compareTimestamps } from '../date-utils/compare-dates.js';\nvar filterUsingOperator = function (itemValue, tokenValue, _a) {\n  var operator = _a.operator,\n    match = _a.match;\n  if (match === 'date' || match === 'datetime') {\n    var comparator = match === 'date' ? compareDates : compareTimestamps;\n    var comparisonResult = comparator(itemValue, tokenValue);\n    switch (operator) {\n      case '<':\n        return comparisonResult < 0;\n      case '<=':\n        return comparisonResult <= 0;\n      case '>':\n        return comparisonResult > 0;\n      case '>=':\n        return comparisonResult >= 0;\n      case '=':\n        return comparisonResult === 0;\n      case '!=':\n        return comparisonResult !== 0;\n      default:\n        return false;\n    }\n  } else if (typeof match === 'function') {\n    return match(itemValue, tokenValue);\n  } else if (match) {\n    throw new Error('Unsupported `operator.match` type given.');\n  }\n  switch (operator) {\n    case '<':\n      return itemValue < tokenValue;\n    case '<=':\n      return itemValue <= tokenValue;\n    case '>':\n      return itemValue > tokenValue;\n    case '>=':\n      return itemValue >= tokenValue;\n    case '=':\n      // eslint-disable-next-line eqeqeq\n      return itemValue == tokenValue;\n    case '!=':\n      // eslint-disable-next-line eqeqeq\n      return itemValue != tokenValue;\n    case ':':\n      return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) > -1;\n    case '!:':\n      return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) === -1;\n    case '^':\n      return (itemValue + '').toLowerCase().startsWith((tokenValue + '').toLowerCase());\n    case '!^':\n      return !(itemValue + '').toLowerCase().startsWith((tokenValue + '').toLowerCase());\n    // The unsupported operators result in an exception being thrown.\n    // The exception can be avoided if using the match function.\n    default:\n      throw new Error('Unsupported operator given.');\n  }\n};\nfunction freeTextFilter(value, item, operator, filteringPropertiesMap) {\n  // If the operator is not a negation, we just need one property of the object to match.\n  // If the operator is a negation, we want none of the properties of the object to match.\n  var isNegation = operator.startsWith('!');\n  return Object.keys(filteringPropertiesMap)[isNegation ? 'every' : 'some'](function (propertyKey) {\n    var operators = filteringPropertiesMap[propertyKey].operators;\n    var propertyOperator = operators[operator];\n    if (!propertyOperator) {\n      return isNegation;\n    }\n    return filterUsingOperator(item[propertyKey], value, propertyOperator);\n  });\n}\nfunction filterByToken(token, item, filteringPropertiesMap) {\n  if (token.propertyKey) {\n    // token refers to a unknown property or uses an unsupported operator\n    if (!(token.propertyKey in filteringPropertiesMap) || !(token.operator in filteringPropertiesMap[token.propertyKey].operators)) {\n      return false;\n    }\n    var operator = filteringPropertiesMap[token.propertyKey].operators[token.operator];\n    var itemValue = (operator === null || operator === void 0 ? void 0 : operator.match) ? item[token.propertyKey] : fixupFalsyValues(item[token.propertyKey]);\n    return filterUsingOperator(itemValue, token.value, operator !== null && operator !== void 0 ? operator : {\n      operator: token.operator\n    });\n  }\n  return freeTextFilter(token.value, item, token.operator, filteringPropertiesMap);\n}\nfunction defaultFilteringFunction(filteringPropertiesMap) {\n  return function (item, _a) {\n    var tokens = _a.tokens,\n      operation = _a.operation;\n    var result = operation === 'and' ? true : !tokens.length;\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n      var token = tokens_1[_i];\n      result = operation === 'and' ? result && filterByToken(token, item, filteringPropertiesMap) : result || filterByToken(token, item, filteringPropertiesMap);\n    }\n    return result;\n  };\n}\nexport function createPropertyFilterPredicate(propertyFiltering, query) {\n  if (query === void 0) {\n    query = {\n      tokens: [],\n      operation: 'and'\n    };\n  }\n  if (!propertyFiltering) {\n    return null;\n  }\n  var filteringPropertiesMap = propertyFiltering.filteringProperties.reduce(function (acc, _a) {\n    var _b;\n    var key = _a.key,\n      operators = _a.operators,\n      defaultOperator = _a.defaultOperator;\n    var operatorMap = (_b = {}, _b[defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '='] = {\n      operator: defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '='\n    }, _b);\n    operators === null || operators === void 0 ? void 0 : operators.forEach(function (op) {\n      if (typeof op === 'string') {\n        operatorMap[op] = {\n          operator: op\n        };\n      } else {\n        operatorMap[op.operator] = {\n          operator: op.operator,\n          match: op.match\n        };\n      }\n    });\n    acc[key] = {\n      operators: operatorMap\n    };\n    return acc;\n  }, {});\n  var filteringFunction = propertyFiltering.filteringFunction || defaultFilteringFunction(filteringPropertiesMap);\n  return function (item) {\n    return filteringFunction(item, query);\n  };\n}\nexport var fixupFalsyValues = function (value) {\n  if (typeof value === 'boolean') {\n    return value + '';\n  }\n  if (value || value === 0) {\n    return value;\n  }\n  return '';\n};","map":{"version":3,"names":["compareDates","compareTimestamps","filterUsingOperator","itemValue","tokenValue","_a","operator","match","comparator","comparisonResult","Error","toLowerCase","indexOf","startsWith","freeTextFilter","value","item","filteringPropertiesMap","isNegation","Object","keys","propertyKey","operators","propertyOperator","filterByToken","token","fixupFalsyValues","defaultFilteringFunction","tokens","operation","result","length","_i","tokens_1","createPropertyFilterPredicate","propertyFiltering","query","filteringProperties","reduce","acc","_b","key","defaultOperator","operatorMap","forEach","op","filteringFunction"],"sources":["/Users/dootano/Desktop/thetekshow-demo-app/node_modules/@cloudscape-design/collection-hooks/mjs/operations/property-filter.js"],"sourcesContent":["import { compareDates, compareTimestamps } from '../date-utils/compare-dates.js';\nvar filterUsingOperator = function (itemValue, tokenValue, _a) {\n    var operator = _a.operator, match = _a.match;\n    if (match === 'date' || match === 'datetime') {\n        var comparator = match === 'date' ? compareDates : compareTimestamps;\n        var comparisonResult = comparator(itemValue, tokenValue);\n        switch (operator) {\n            case '<':\n                return comparisonResult < 0;\n            case '<=':\n                return comparisonResult <= 0;\n            case '>':\n                return comparisonResult > 0;\n            case '>=':\n                return comparisonResult >= 0;\n            case '=':\n                return comparisonResult === 0;\n            case '!=':\n                return comparisonResult !== 0;\n            default:\n                return false;\n        }\n    }\n    else if (typeof match === 'function') {\n        return match(itemValue, tokenValue);\n    }\n    else if (match) {\n        throw new Error('Unsupported `operator.match` type given.');\n    }\n    switch (operator) {\n        case '<':\n            return itemValue < tokenValue;\n        case '<=':\n            return itemValue <= tokenValue;\n        case '>':\n            return itemValue > tokenValue;\n        case '>=':\n            return itemValue >= tokenValue;\n        case '=':\n            // eslint-disable-next-line eqeqeq\n            return itemValue == tokenValue;\n        case '!=':\n            // eslint-disable-next-line eqeqeq\n            return itemValue != tokenValue;\n        case ':':\n            return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) > -1;\n        case '!:':\n            return (itemValue + '').toLowerCase().indexOf((tokenValue + '').toLowerCase()) === -1;\n        case '^':\n            return (itemValue + '').toLowerCase().startsWith((tokenValue + '').toLowerCase());\n        case '!^':\n            return !(itemValue + '').toLowerCase().startsWith((tokenValue + '').toLowerCase());\n        // The unsupported operators result in an exception being thrown.\n        // The exception can be avoided if using the match function.\n        default:\n            throw new Error('Unsupported operator given.');\n    }\n};\nfunction freeTextFilter(value, item, operator, filteringPropertiesMap) {\n    // If the operator is not a negation, we just need one property of the object to match.\n    // If the operator is a negation, we want none of the properties of the object to match.\n    var isNegation = operator.startsWith('!');\n    return Object.keys(filteringPropertiesMap)[isNegation ? 'every' : 'some'](function (propertyKey) {\n        var operators = filteringPropertiesMap[propertyKey].operators;\n        var propertyOperator = operators[operator];\n        if (!propertyOperator) {\n            return isNegation;\n        }\n        return filterUsingOperator(item[propertyKey], value, propertyOperator);\n    });\n}\nfunction filterByToken(token, item, filteringPropertiesMap) {\n    if (token.propertyKey) {\n        // token refers to a unknown property or uses an unsupported operator\n        if (!(token.propertyKey in filteringPropertiesMap) ||\n            !(token.operator in filteringPropertiesMap[token.propertyKey].operators)) {\n            return false;\n        }\n        var operator = filteringPropertiesMap[token.propertyKey].operators[token.operator];\n        var itemValue = (operator === null || operator === void 0 ? void 0 : operator.match)\n            ? item[token.propertyKey]\n            : fixupFalsyValues(item[token.propertyKey]);\n        return filterUsingOperator(itemValue, token.value, operator !== null && operator !== void 0 ? operator : { operator: token.operator });\n    }\n    return freeTextFilter(token.value, item, token.operator, filteringPropertiesMap);\n}\nfunction defaultFilteringFunction(filteringPropertiesMap) {\n    return function (item, _a) {\n        var tokens = _a.tokens, operation = _a.operation;\n        var result = operation === 'and' ? true : !tokens.length;\n        for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n            var token = tokens_1[_i];\n            result =\n                operation === 'and'\n                    ? result && filterByToken(token, item, filteringPropertiesMap)\n                    : result || filterByToken(token, item, filteringPropertiesMap);\n        }\n        return result;\n    };\n}\nexport function createPropertyFilterPredicate(propertyFiltering, query) {\n    if (query === void 0) { query = { tokens: [], operation: 'and' }; }\n    if (!propertyFiltering) {\n        return null;\n    }\n    var filteringPropertiesMap = propertyFiltering.filteringProperties.reduce(function (acc, _a) {\n        var _b;\n        var key = _a.key, operators = _a.operators, defaultOperator = _a.defaultOperator;\n        var operatorMap = (_b = {}, _b[defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '='] = { operator: defaultOperator !== null && defaultOperator !== void 0 ? defaultOperator : '=' }, _b);\n        operators === null || operators === void 0 ? void 0 : operators.forEach(function (op) {\n            if (typeof op === 'string') {\n                operatorMap[op] = { operator: op };\n            }\n            else {\n                operatorMap[op.operator] = { operator: op.operator, match: op.match };\n            }\n        });\n        acc[key] = {\n            operators: operatorMap,\n        };\n        return acc;\n    }, {});\n    var filteringFunction = propertyFiltering.filteringFunction || defaultFilteringFunction(filteringPropertiesMap);\n    return function (item) { return filteringFunction(item, query); };\n}\nexport var fixupFalsyValues = function (value) {\n    if (typeof value === 'boolean') {\n        return value + '';\n    }\n    if (value || value === 0) {\n        return value;\n    }\n    return '';\n};\n"],"mappings":"AAAA,SAASA,YAAY,EAAEC,iBAAiB,QAAQ,gCAAgC;AAChF,IAAIC,mBAAmB,GAAG,SAAAA,CAAUC,SAAS,EAAEC,UAAU,EAAEC,EAAE,EAAE;EAC3D,IAAIC,QAAQ,GAAGD,EAAE,CAACC,QAAQ;IAAEC,KAAK,GAAGF,EAAE,CAACE,KAAK;EAC5C,IAAIA,KAAK,KAAK,MAAM,IAAIA,KAAK,KAAK,UAAU,EAAE;IAC1C,IAAIC,UAAU,GAAGD,KAAK,KAAK,MAAM,GAAGP,YAAY,GAAGC,iBAAiB;IACpE,IAAIQ,gBAAgB,GAAGD,UAAU,CAACL,SAAS,EAAEC,UAAU,CAAC;IACxD,QAAQE,QAAQ;MACZ,KAAK,GAAG;QACJ,OAAOG,gBAAgB,GAAG,CAAC;MAC/B,KAAK,IAAI;QACL,OAAOA,gBAAgB,IAAI,CAAC;MAChC,KAAK,GAAG;QACJ,OAAOA,gBAAgB,GAAG,CAAC;MAC/B,KAAK,IAAI;QACL,OAAOA,gBAAgB,IAAI,CAAC;MAChC,KAAK,GAAG;QACJ,OAAOA,gBAAgB,KAAK,CAAC;MACjC,KAAK,IAAI;QACL,OAAOA,gBAAgB,KAAK,CAAC;MACjC;QACI,OAAO,KAAK;IACpB;EACJ,CAAC,MACI,IAAI,OAAOF,KAAK,KAAK,UAAU,EAAE;IAClC,OAAOA,KAAK,CAACJ,SAAS,EAAEC,UAAU,CAAC;EACvC,CAAC,MACI,IAAIG,KAAK,EAAE;IACZ,MAAM,IAAIG,KAAK,CAAC,0CAA0C,CAAC;EAC/D;EACA,QAAQJ,QAAQ;IACZ,KAAK,GAAG;MACJ,OAAOH,SAAS,GAAGC,UAAU;IACjC,KAAK,IAAI;MACL,OAAOD,SAAS,IAAIC,UAAU;IAClC,KAAK,GAAG;MACJ,OAAOD,SAAS,GAAGC,UAAU;IACjC,KAAK,IAAI;MACL,OAAOD,SAAS,IAAIC,UAAU;IAClC,KAAK,GAAG;MACJ;MACA,OAAOD,SAAS,IAAIC,UAAU;IAClC,KAAK,IAAI;MACL;MACA,OAAOD,SAAS,IAAIC,UAAU;IAClC,KAAK,GAAG;MACJ,OAAO,CAACD,SAAS,GAAG,EAAE,EAAEQ,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,CAACR,UAAU,GAAG,EAAE,EAAEO,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACvF,KAAK,IAAI;MACL,OAAO,CAACR,SAAS,GAAG,EAAE,EAAEQ,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,CAACR,UAAU,GAAG,EAAE,EAAEO,WAAW,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IACzF,KAAK,GAAG;MACJ,OAAO,CAACR,SAAS,GAAG,EAAE,EAAEQ,WAAW,CAAC,CAAC,CAACE,UAAU,CAAC,CAACT,UAAU,GAAG,EAAE,EAAEO,WAAW,CAAC,CAAC,CAAC;IACrF,KAAK,IAAI;MACL,OAAO,CAAC,CAACR,SAAS,GAAG,EAAE,EAAEQ,WAAW,CAAC,CAAC,CAACE,UAAU,CAAC,CAACT,UAAU,GAAG,EAAE,EAAEO,WAAW,CAAC,CAAC,CAAC;IACtF;IACA;IACA;MACI,MAAM,IAAID,KAAK,CAAC,6BAA6B,CAAC;EACtD;AACJ,CAAC;AACD,SAASI,cAAcA,CAACC,KAAK,EAAEC,IAAI,EAAEV,QAAQ,EAAEW,sBAAsB,EAAE;EACnE;EACA;EACA,IAAIC,UAAU,GAAGZ,QAAQ,CAACO,UAAU,CAAC,GAAG,CAAC;EACzC,OAAOM,MAAM,CAACC,IAAI,CAACH,sBAAsB,CAAC,CAACC,UAAU,GAAG,OAAO,GAAG,MAAM,CAAC,CAAC,UAAUG,WAAW,EAAE;IAC7F,IAAIC,SAAS,GAAGL,sBAAsB,CAACI,WAAW,CAAC,CAACC,SAAS;IAC7D,IAAIC,gBAAgB,GAAGD,SAAS,CAAChB,QAAQ,CAAC;IAC1C,IAAI,CAACiB,gBAAgB,EAAE;MACnB,OAAOL,UAAU;IACrB;IACA,OAAOhB,mBAAmB,CAACc,IAAI,CAACK,WAAW,CAAC,EAAEN,KAAK,EAAEQ,gBAAgB,CAAC;EAC1E,CAAC,CAAC;AACN;AACA,SAASC,aAAaA,CAACC,KAAK,EAAET,IAAI,EAAEC,sBAAsB,EAAE;EACxD,IAAIQ,KAAK,CAACJ,WAAW,EAAE;IACnB;IACA,IAAI,EAAEI,KAAK,CAACJ,WAAW,IAAIJ,sBAAsB,CAAC,IAC9C,EAAEQ,KAAK,CAACnB,QAAQ,IAAIW,sBAAsB,CAACQ,KAAK,CAACJ,WAAW,CAAC,CAACC,SAAS,CAAC,EAAE;MAC1E,OAAO,KAAK;IAChB;IACA,IAAIhB,QAAQ,GAAGW,sBAAsB,CAACQ,KAAK,CAACJ,WAAW,CAAC,CAACC,SAAS,CAACG,KAAK,CAACnB,QAAQ,CAAC;IAClF,IAAIH,SAAS,GAAG,CAACG,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACC,KAAK,IAC7ES,IAAI,CAACS,KAAK,CAACJ,WAAW,CAAC,GACvBK,gBAAgB,CAACV,IAAI,CAACS,KAAK,CAACJ,WAAW,CAAC,CAAC;IAC/C,OAAOnB,mBAAmB,CAACC,SAAS,EAAEsB,KAAK,CAACV,KAAK,EAAET,QAAQ,KAAK,IAAI,IAAIA,QAAQ,KAAK,KAAK,CAAC,GAAGA,QAAQ,GAAG;MAAEA,QAAQ,EAAEmB,KAAK,CAACnB;IAAS,CAAC,CAAC;EAC1I;EACA,OAAOQ,cAAc,CAACW,KAAK,CAACV,KAAK,EAAEC,IAAI,EAAES,KAAK,CAACnB,QAAQ,EAAEW,sBAAsB,CAAC;AACpF;AACA,SAASU,wBAAwBA,CAACV,sBAAsB,EAAE;EACtD,OAAO,UAAUD,IAAI,EAAEX,EAAE,EAAE;IACvB,IAAIuB,MAAM,GAAGvB,EAAE,CAACuB,MAAM;MAAEC,SAAS,GAAGxB,EAAE,CAACwB,SAAS;IAChD,IAAIC,MAAM,GAAGD,SAAS,KAAK,KAAK,GAAG,IAAI,GAAG,CAACD,MAAM,CAACG,MAAM;IACxD,KAAK,IAAIC,EAAE,GAAG,CAAC,EAAEC,QAAQ,GAAGL,MAAM,EAAEI,EAAE,GAAGC,QAAQ,CAACF,MAAM,EAAEC,EAAE,EAAE,EAAE;MAC5D,IAAIP,KAAK,GAAGQ,QAAQ,CAACD,EAAE,CAAC;MACxBF,MAAM,GACFD,SAAS,KAAK,KAAK,GACbC,MAAM,IAAIN,aAAa,CAACC,KAAK,EAAET,IAAI,EAAEC,sBAAsB,CAAC,GAC5Da,MAAM,IAAIN,aAAa,CAACC,KAAK,EAAET,IAAI,EAAEC,sBAAsB,CAAC;IAC1E;IACA,OAAOa,MAAM;EACjB,CAAC;AACL;AACA,OAAO,SAASI,6BAA6BA,CAACC,iBAAiB,EAAEC,KAAK,EAAE;EACpE,IAAIA,KAAK,KAAK,KAAK,CAAC,EAAE;IAAEA,KAAK,GAAG;MAAER,MAAM,EAAE,EAAE;MAAEC,SAAS,EAAE;IAAM,CAAC;EAAE;EAClE,IAAI,CAACM,iBAAiB,EAAE;IACpB,OAAO,IAAI;EACf;EACA,IAAIlB,sBAAsB,GAAGkB,iBAAiB,CAACE,mBAAmB,CAACC,MAAM,CAAC,UAAUC,GAAG,EAAElC,EAAE,EAAE;IACzF,IAAImC,EAAE;IACN,IAAIC,GAAG,GAAGpC,EAAE,CAACoC,GAAG;MAAEnB,SAAS,GAAGjB,EAAE,CAACiB,SAAS;MAAEoB,eAAe,GAAGrC,EAAE,CAACqC,eAAe;IAChF,IAAIC,WAAW,IAAIH,EAAE,GAAG,CAAC,CAAC,EAAEA,EAAE,CAACE,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAGA,eAAe,GAAG,GAAG,CAAC,GAAG;MAAEpC,QAAQ,EAAEoC,eAAe,KAAK,IAAI,IAAIA,eAAe,KAAK,KAAK,CAAC,GAAGA,eAAe,GAAG;IAAI,CAAC,EAAEF,EAAE,CAAC;IAClNlB,SAAS,KAAK,IAAI,IAAIA,SAAS,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACsB,OAAO,CAAC,UAAUC,EAAE,EAAE;MAClF,IAAI,OAAOA,EAAE,KAAK,QAAQ,EAAE;QACxBF,WAAW,CAACE,EAAE,CAAC,GAAG;UAAEvC,QAAQ,EAAEuC;QAAG,CAAC;MACtC,CAAC,MACI;QACDF,WAAW,CAACE,EAAE,CAACvC,QAAQ,CAAC,GAAG;UAAEA,QAAQ,EAAEuC,EAAE,CAACvC,QAAQ;UAAEC,KAAK,EAAEsC,EAAE,CAACtC;QAAM,CAAC;MACzE;IACJ,CAAC,CAAC;IACFgC,GAAG,CAACE,GAAG,CAAC,GAAG;MACPnB,SAAS,EAAEqB;IACf,CAAC;IACD,OAAOJ,GAAG;EACd,CAAC,EAAE,CAAC,CAAC,CAAC;EACN,IAAIO,iBAAiB,GAAGX,iBAAiB,CAACW,iBAAiB,IAAInB,wBAAwB,CAACV,sBAAsB,CAAC;EAC/G,OAAO,UAAUD,IAAI,EAAE;IAAE,OAAO8B,iBAAiB,CAAC9B,IAAI,EAAEoB,KAAK,CAAC;EAAE,CAAC;AACrE;AACA,OAAO,IAAIV,gBAAgB,GAAG,SAAAA,CAAUX,KAAK,EAAE;EAC3C,IAAI,OAAOA,KAAK,KAAK,SAAS,EAAE;IAC5B,OAAOA,KAAK,GAAG,EAAE;EACrB;EACA,IAAIA,KAAK,IAAIA,KAAK,KAAK,CAAC,EAAE;IACtB,OAAOA,KAAK;EAChB;EACA,OAAO,EAAE;AACb,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}