{"ast":null,"code":"import { __rest } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect } from 'react';\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nimport { getNameFromSelector, getSubStepAllSelector } from '../internal/analytics/selectors';\nimport { getAnalyticsMetadataProps } from '../internal/base-component';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { applyDisplayName } from '../internal/utils/apply-display-name';\nimport InternalAlert from './internal';\nconst Alert = React.forwardRef((_a, ref) => {\n  var {\n      type = 'info',\n      visible = true\n    } = _a,\n    props = __rest(_a, [\"type\", \"visible\"]);\n  const analyticsMetadata = getAnalyticsMetadataProps(props);\n  const baseComponentProps = useBaseComponent('Alert', {\n    props: {\n      type,\n      visible,\n      dismissible: props.dismissible\n    }\n  }, analyticsMetadata);\n  const {\n    funnelIdentifier,\n    funnelInteractionId,\n    funnelErrorContext,\n    submissionAttempt,\n    funnelState,\n    errorCount\n  } = useFunnel();\n  const {\n    stepNumber,\n    stepNameSelector,\n    stepIdentifier\n  } = useFunnelStep();\n  const {\n    subStepSelector,\n    subStepNameSelector,\n    subStepIdentifier,\n    subStepErrorContext\n  } = useFunnelSubStep();\n  useEffect(() => {\n    var _a, _b, _c;\n    if (funnelInteractionId && visible && type === 'error' && funnelState.current !== 'complete') {\n      const stepName = getNameFromSelector(stepNameSelector);\n      const subStepName = getNameFromSelector(subStepNameSelector);\n      errorCount.current++;\n      // We don't want to report an error if it is hidden, e.g. inside an Expandable Section.\n      const errorIsVisible = ((_c = (_b = (_a = baseComponentProps.__internalRootRef.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect()) === null || _b === void 0 ? void 0 : _b.width) !== null && _c !== void 0 ? _c : 0) > 0;\n      if (errorIsVisible) {\n        if (subStepSelector) {\n          FunnelMetrics.funnelSubStepError({\n            funnelInteractionId,\n            funnelIdentifier,\n            stepIdentifier,\n            subStepSelector,\n            subStepName,\n            subStepNameSelector,\n            stepNumber,\n            stepName,\n            stepNameSelector,\n            subStepAllSelector: getSubStepAllSelector(),\n            subStepIdentifier,\n            subStepErrorContext\n          });\n        } else {\n          FunnelMetrics.funnelError({\n            funnelIdentifier,\n            funnelInteractionId,\n            funnelErrorContext\n          });\n        }\n      }\n      return () => {\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n        errorCount.current--;\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [funnelInteractionId, visible, submissionAttempt, errorCount]);\n  return React.createElement(InternalAlert, Object.assign({\n    type: type,\n    visible: visible\n  }, props, baseComponentProps, {\n    ref: ref\n  }));\n});\napplyDisplayName(Alert, 'Alert');\nexport default Alert;","map":{"version":3,"names":["React","useEffect","FunnelMetrics","useFunnel","useFunnelStep","useFunnelSubStep","getNameFromSelector","getSubStepAllSelector","getAnalyticsMetadataProps","useBaseComponent","applyDisplayName","InternalAlert","Alert","forwardRef","_a","ref","type","visible","props","__rest","analyticsMetadata","baseComponentProps","dismissible","funnelIdentifier","funnelInteractionId","funnelErrorContext","submissionAttempt","funnelState","errorCount","stepNumber","stepNameSelector","stepIdentifier","subStepSelector","subStepNameSelector","subStepIdentifier","subStepErrorContext","current","stepName","subStepName","errorIsVisible","_c","_b","__internalRootRef","getBoundingClientRect","width","funnelSubStepError","subStepAllSelector","funnelError","createElement","Object","assign"],"sources":["/Users/dootano/Desktop/thetekshow-demo-app/node_modules/src/alert/index.tsx"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect } from 'react';\n\nimport { FunnelMetrics } from '../internal/analytics';\nimport { useFunnel, useFunnelStep, useFunnelSubStep } from '../internal/analytics/hooks/use-funnel';\nimport { getNameFromSelector, getSubStepAllSelector } from '../internal/analytics/selectors';\nimport { BasePropsWithAnalyticsMetadata, getAnalyticsMetadataProps } from '../internal/base-component';\nimport useBaseComponent from '../internal/hooks/use-base-component';\nimport { applyDisplayName } from '../internal/utils/apply-display-name';\nimport { AlertProps } from './interfaces';\nimport InternalAlert from './internal';\n\nexport { AlertProps };\n\nconst Alert = React.forwardRef(\n  ({ type = 'info', visible = true, ...props }: AlertProps, ref: React.Ref<AlertProps.Ref>) => {\n    const analyticsMetadata = getAnalyticsMetadataProps(props as BasePropsWithAnalyticsMetadata);\n    const baseComponentProps = useBaseComponent<HTMLDivElement>(\n      'Alert',\n      {\n        props: { type, visible, dismissible: props.dismissible },\n      },\n      analyticsMetadata\n    );\n\n    const { funnelIdentifier, funnelInteractionId, funnelErrorContext, submissionAttempt, funnelState, errorCount } =\n      useFunnel();\n    const { stepNumber, stepNameSelector, stepIdentifier } = useFunnelStep();\n    const { subStepSelector, subStepNameSelector, subStepIdentifier, subStepErrorContext } = useFunnelSubStep();\n\n    useEffect(() => {\n      if (funnelInteractionId && visible && type === 'error' && funnelState.current !== 'complete') {\n        const stepName = getNameFromSelector(stepNameSelector);\n        const subStepName = getNameFromSelector(subStepNameSelector);\n\n        errorCount.current++;\n\n        // We don't want to report an error if it is hidden, e.g. inside an Expandable Section.\n        const errorIsVisible = (baseComponentProps.__internalRootRef.current?.getBoundingClientRect()?.width ?? 0) > 0;\n\n        if (errorIsVisible) {\n          if (subStepSelector) {\n            FunnelMetrics.funnelSubStepError({\n              funnelInteractionId,\n              funnelIdentifier,\n              stepIdentifier,\n              subStepSelector,\n              subStepName,\n              subStepNameSelector,\n              stepNumber,\n              stepName,\n              stepNameSelector,\n              subStepAllSelector: getSubStepAllSelector(),\n              subStepIdentifier,\n              subStepErrorContext,\n            });\n          } else {\n            FunnelMetrics.funnelError({\n              funnelIdentifier,\n              funnelInteractionId,\n              funnelErrorContext,\n            });\n          }\n        }\n\n        return () => {\n          // eslint-disable-next-line react-hooks/exhaustive-deps\n          errorCount.current--;\n        };\n      }\n\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [funnelInteractionId, visible, submissionAttempt, errorCount]);\n\n    return <InternalAlert type={type} visible={visible} {...props} {...baseComponentProps} ref={ref} />;\n  }\n);\n\napplyDisplayName(Alert, 'Alert');\nexport default Alert;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}